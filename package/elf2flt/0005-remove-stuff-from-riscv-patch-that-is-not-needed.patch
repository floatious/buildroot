From 8024b029839c69e9aee646cc78b257a6da0a110f Mon Sep 17 00:00:00 2001
From: Niklas Cassel <niklas.cassel@wdc.com>
Date: Fri, 25 Mar 2022 15:00:15 +0100
Subject: [PATCH 1/2] remove stuff from riscv patch that is not needed

Signed-off-by: Niklas Cassel <niklas.cassel@wdc.com>
---
 elf2flt.ld.in | 1 -
 ld-elf2flt.c  | 5 -----
 2 files changed, 6 deletions(-)

diff --git a/elf2flt.ld.in b/elf2flt.ld.in
index 20230d5..1c04ef3 100644
--- a/elf2flt.ld.in
+++ b/elf2flt.ld.in
@@ -71,7 +71,6 @@ W_RODAT		*(.gnu.linkonce.r*)
 		LONG(-1)
 		. = ALIGN(0x20) ;
 RISCV_GP:	__global_pointer$ = . + 0x800 ;
-RISCV_GP:	. = ALIGN(0x20) ;
 R_RODAT		*(.rodata)
 R_RODAT		*(.rodata1)
 R_RODAT		*(.rodata.*)
diff --git a/ld-elf2flt.c b/ld-elf2flt.c
index 1809d8a..e11ef64 100644
--- a/ld-elf2flt.c
+++ b/ld-elf2flt.c
@@ -325,11 +325,6 @@ static int do_final_link(void)
 	}
 
 	if (streq(TARGET_CPU, "riscv64")) {
-		/* The .got section must come before the .got.plt section. */
-		append_sed(&sed, "(.got.plt)", "(.got.tmp)");
-		append_sed(&sed, "(.got.plt)", "(.got)");
-		append_sed(&sed, "(.got.tmp)", "(.got.plt)");
-
 		/* The global pointer symbol is defined after the GOT. */
 		append_sed(&sed, "^RISCV_GP:", "");
 	} else {
-- 
2.35.1

